<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Uploader un fichier</title>
</head>
<body>
<h2>Uploader un fichier vers S3</h2>
<form id="uploadForm" enctype="multipart/form-data" method="POST" action="http://localhost:3000/upload">
<input type="file" name="file" required />
<button type="submit">Envoyer</button>
</form>
</body>
</html>
<button onclick="fetchFiles()">Afficher les fichiers</button>
<ul id="fileList"></ul>

<script>
async function fetchFiles() {
const res = await fetch('/files');
const files = await res.json();
const list = document.getElementById('fileList');
list.innerHTML = ''; // Vide la liste d'avant

files.forEach(file => {
const li = document.createElement('li');
const link = document.createElement('a');
link.href = file.url;
link.textContent = file.key;
link.target = "_blank";
li.appendChild(link);
list.appendChild(li);
});
}
</script>
